jQuery(function(i){var o="This item must contain at least one choice";function r(){i(document).trigger("nrChoicesUpdate"),ConvertFormsBuilder.FieldsHelper.emitEvent("update")}i(document).on("change",".nr-choice-item input.nr-choice-default",function(e){var t=i(this);t.closest(".nr_choices").find("input[type=radio]").not(t).prop("checked",!1).trigger("update"),r()}),i(document).on("change",".nr-choice-settings .showvalues",function(e){var t=i(this),n=t.closest(".nr-choice-settings").prev(),c=t.is(":checked");n.find("input.nr-choice-value").css({display:c?"block":"none"})}),i(document).on("change",".nr-choice-settings .showcalcvalues",function(e){var t=i(this),n=t.closest(".nr-choice-settings").prev(),c=t.is(":checked");n.find("input.nr-choice-calc-value").css({display:c?"block":"none"})}),i(document).on("click",".nr-choice-remove",function(e){e.preventDefault(),function(e){var t=e.closest(".nr_choices"),n=parseInt(t.find(".nr-choice-item").length),c=parseInt(t.data("min"));if(n==c)return alert(o);e.closest(".nr-choice-item").remove(),r()}(i(this))}),i(document).on("click",".nr-choice-add",function(e){e.preventDefault(),function(e){var t=e.closest(".nr-choice-item"),n=t.find("input[type=radio]").is(":checked"),c=e.closest(".nr_choices"),i=parseInt(c.attr("data-nextid")),o=c.attr("data-fieldname"),a=t.clone().insertAfter(t);repeatableField=c.closest(".subform-repeatable-group"),repeatableField.length&&repeatableField[0].hasAttribute("data-new")&&(repeatableIndex=repeatableField.data("group"),o=o.replace("[fieldsX]","["+repeatableIndex+"]"));a.attr("data-id",i),a.find("input.nr-choice-label").val("").attr("name",o+"[choices]["+i+"][label]"),a.find("input.nr-choice-value").val("").attr("name",o+"[choices]["+i+"][value]"),a.find("input.nr-choice-default").attr("name",o+"[choices]["+i+"][default]").prop("checked",!1),1==n&&t.find("input[type=radio]").prop("checked",!0);i++,c.attr("data-nextid",i),r()}(i(this))}),document.querySelector(".nrEditor").addEventListener("fields.displayOptions",function(e){var t=e.detail.el.querySelector(".nr_choices");t&&(ConvertFormsBuilder.loadStylesheet("media/com_convertforms/css/choices.css"),new Sortable(t,{animation:150,handle:".nr-choice-sort",onUpdate:function(){r()}}))})});
